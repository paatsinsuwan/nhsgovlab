<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style type="text/css">

    #viz-container {
      font: 10px 'Helvetica';
    }

    .axis path,
    .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

    .bar {
      fill: steelblue;
    }

    .x.axis path {
      display: none;
    }

    .title {
      font-size: 5em;
      font-weight: lighter;
    }

    </style>
    <title>NHSGovlab by paatsinsuwan</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>NHSGovlab</h1>
          <h2>Prototype App for NHS GovLab Experiment</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/paatsinsuwan/nhsgovlab/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/paatsinsuwan/nhsgovlab/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/paatsinsuwan/nhsgovlab" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <pre><code>dataset is a csv file of value:

age,people
0-4,540878
5-9,561115
10-14,530816
15-19,520641
20-24,589831
25-29,680659
30-34,687362
35-39,660901
40-44,602379
45-49,531118
50-54,481267
55-59,369105
60-64,314349
65-69,259167
70-74,235627
75-79,193221
80-84,128139
85+,121703

extract from nycopendata.socrata.com</code></pre>
          <hr>
          <h2>Projected Population</h2>
          <div id="viz-container">
          </div>

        </section>

        <footer>
          <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
          <script type="text/javascript" src="//d3js.org/d3.v3.min.js"></script>
          <script type="text/javascript">
          var margin = {top: 20, right: 20, bottom: 30, left: 40},
              width = 660 - margin.left - margin.right,
              height = 500 - margin.top - margin.bottom;
          var year = "2000";

          var x = d3.scale.ordinal()
              .rangeRoundBands([0, width], .1);

          var y = d3.scale.linear()
              .range([height, 0]);

          var xAxis = d3.svg.axis()
              .scale(x)
              .orient("bottom");

          var yAxis = d3.svg.axis()
              .scale(y)
              .orient("left")
              .tickFormat(function(d) { return Math.round(d / 1e3) + "K"; });

          var svg = d3.select("#viz-container").append("svg")
              .attr("width", width + margin.left + margin.right)
              .attr("height", height + margin.top + margin.bottom)
            .append("g")
              .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

          var title = svg.append("text")
            .attr("class", "title")
            .attr("dx", width - margin.left - 50)
            .attr("dy", ".71em")
            .text(year);

          d3.csv(year+".csv", function(error, data) {

            // data.forEach(function(d) {
            //   d.people = +d.people;
            // });

            x.domain(data.map(function(d) { return d.age; }));
            y.domain([0, d3.max(data, function(d) { return d.people; })]);

            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis);

            svg.append("g")
                .attr("class", "y axis")
                .call(yAxis)
              .append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", 6)
                .attr("dy", ".71em")
                .style("text-anchor", "end")
                .text("People");

            svg.selectAll(".bar")
                .data(data)
              .enter().append("rect")
                .attr("class", "bar")
                .attr("x", function(d) { return x(d.age); })
                .attr("width", x.rangeBand())
                .attr("y", function(d) { return y(d.people); })
                .attr("height", function(d) { return height - y(d.people); });

          });
          </script>
          NHSGovlab is maintained by <a href="https://github.com/paatsinsuwan">paatsinsuwan</a><br>
          And sponsored by <a href="http://wagner.nyu.edu/centers/govlab">GovLab</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>